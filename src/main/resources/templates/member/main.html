<!-- 좌측 고정 네비게이션 바 -->
<div class="sidebar">
    <div class="container">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link" sec:authorize="isAnonymous()" th:href="@{/member/login}">로그인</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" sec:authorize="isAuthenticated()" th:href="@{/member/logout}">로그아웃</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" sec:authorize="isAuthenticated()" th:href="@{/member/modify}">정보수정</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" sec:authorize="isAuthenticated()" th:href="@{/member/delete}">계정 삭제</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" sec:authorize="isAuthenticated()" th:href="@{/member/search}">비밀번호 변경</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" sec:authorize="isAnonymous()" th:href="@{/member/signup}">회원가입</a>
            </li>
            <div>
                <li class="nav-item" th:if="${dto != null && dto.memberstatus == 'admin' }">
                    <a class="nav-link" th:href="@{/member/admin}">관리자페이지</a>
                </li>           
            </div>
        </ul>
    </div>
</div>

<script>
window.onload = function() {     
		//주소 없을시 자동으로 수정폼으로 이동 + 모달창 같이 
    if ("[[${dto.address}]]" === "null" || "[[${dto.address}]]" === "") { 
        console.log("주소 값이 null임. 새창을 띄우고 페이지를 이동합니다.");
        
        // 새 창으로 안내용 모달창 띄우기
        const modalContent = `
            <html>
                <head>
                    <title>안내</title>
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
                    <style>
                        body {
                            font-family: 'Arial', sans-serif;
                            background: #f8f9fa;
                        }
                        .modal-dialog {
                            margin-top: 10%;
                        }
                        .modal-footer button {
                            width: 100%;
                        }
                    </style>
                </head>
                <body>
                    <div class="modal-dialog modal-dialog-centered" style="max-width: 400px;">
                        <div class="modal-content">
                            <div class="modal-header bg-primary text-white">
                                <h5 class="modal-title">공지</h5>
                                <button type="button" class="btn-close" aria-label="Close" onclick="window.close()"></button>
                            </div>
                            <div class="modal-body text-center">
                                <p>주소 및 개인정보가 필요합니다. 해당 페이지에서 수정해주세요.</p>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-secondary" onclick="window.close()">닫기</button>
                            </div>
                        </div>
                    </div>
                </body>
            </html>`;
        const modalWindow = window.open("", "_blank", "width=500,height=400");
        modalWindow.document.write(modalContent);
        modalWindow.document.close();

        // 강제로 /member/modify 페이지로 이동
        window.location.href = "/member/modify";
    } else {
        console.log("주소 값이 null이 아님. 페이지 이동하지 않음.");
    }
};
</script>